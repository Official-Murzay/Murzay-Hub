-- Load Rayfield
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- Create Window with custom theme
local Window = Rayfield:CreateWindow({
    Name = "MurzzHub | v1.0",
    LoadingTitle = "Loading UI..",
    LoadingSubtitle = "By Murzay",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MurzzHub",
        FileName = "Config"
    },
    Discord = { Enabled = false },
    KeySystem = false,
    Theme = {
        -- Header / top bar
        Accent = Color3.fromRGB(135, 206, 250),      -- Light Blue
        -- Background / body
        Background = Color3.fromRGB(25, 25, 112),    -- Darker Blue
        -- Text
        TextColor = Color3.fromRGB(255, 255, 255),   -- White
        -- Sections / tabs
        SectionColor = Color3.fromRGB(70, 130, 180), -- Medium Blue
        -- Buttons / toggles
        ButtonColor = Color3.fromRGB(100, 149, 237), -- Cornflower Blue
        ToggleColor = Color3.fromRGB(135, 206, 250)  -- Light Blue
    }
})

-- Home Tab
local HomeTab = Window:CreateTab("Home", 4483362458) -- Icon placeholder

-- Services
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Variables
local hrp = player.Character:WaitForChild("HumanoidRootPart")
local tycoonsFolder = workspace:WaitForChild("TycoonSets"):WaitForChild("Tycoons")
local collectibles = {}

-- Update HRP on respawn
local function updateHRP()
    local character = player.Character or player.CharacterAdded:Wait()
    hrp = character:WaitForChild("HumanoidRootPart")
end
player.CharacterAdded:Connect(updateHRP)

-- Scan Tycoon
local function scanTycoon(tycoon)
    local essentials = tycoon:FindFirstChild("Essentials")
    if not essentials then return end

    -- Giver
    local giver = essentials:FindFirstChild("Giver")
    if giver and not table.find(collectibles, giver) then
        table.insert(collectibles, giver)
    end

    -- Droppers
    local droppers = essentials:FindFirstChild("Droppers")
    if droppers then
        for _, dropper in ipairs(droppers:GetChildren()) do
            if not table.find(collectibles, dropper) then
                table.insert(collectibles, dropper)
            end
        end

        -- Auto-add new droppers
        droppers.ChildAdded:Connect(function(newDropper)
            if not table.find(collectibles, newDropper) then
                table.insert(collectibles, newDropper)
            end
        end)
    end
end

-- Initial Scan
for _, tycoon in ipairs(tycoonsFolder:GetChildren()) do
    scanTycoon(tycoon)
end

-- Auto-scan new tycoons
tycoonsFolder.ChildAdded:Connect(scanTycoon)

-- Auto Collect All Toggle
HomeTab:CreateToggle({
    Name = "Auto Collect All",
    CurrentValue = false,
    Flag = "AutoCollectAll",
    Callback = function(Value)
        _G.autoCollectAll = Value

        task.spawn(function()
            while _G.autoCollectAll do
                if hrp and hrp.Parent then
                    for _, obj in ipairs(collectibles) do
                        if obj and obj.Parent then
                            firetouchinterest(obj, hrp, 0)
                            firetouchinterest(obj, hrp, 1)
                        end
                    end
                end
                task.wait(0.1)
            end
        end)
    end
})

-- Keybind to Toggle UI
HomeTab:CreateKeybind({
    Name = "Toggle UI",
    CurrentKeybind = "F2",
    HoldToInteract = false,
    Flag = "UIToggle",
    Callback = function()
        Rayfield:Toggle()
    end
})
